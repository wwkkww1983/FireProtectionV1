<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link href="./static/reset.css">
    <link href="./src/assets/css/border.css">
     <!-- 获取地理位置 -->
  <script type="text/javascript" src="https://webapi.amap.com/maps?v=1.3&key=fd2be75ec417c0f57eb81628263f7c9a"></script>
  <script src="./static/js/mui.js"></script>
 <script>
    // 一级页面不返回，连续按两次退出，根据项目自行添加homePage 里的值
      const homePage = ['#/login', '#/dataMonitor', '#/regulatory', '#/mySet']
     /*  mui.init(); */
      mui.plusReady(function () {
        // 首页返回键处理
        // 处理逻辑：1秒内，连续两次按返回键，则退出应用；
        var first = null
        var webview = plus.webview.currentWebview()
        plus.key.addEventListener('backbutton', function () {
          console.log("this.location.hash",this.location.hash)
          if (homePage.indexOf(this.location.hash) !== -1) {
            console.log("一级页面退出")
            // 首次按键，提示‘再按一次退出应用’
            if (!first) {
              first = new Date().getTime()
              mui.toast('再按一次退出应用')
              setTimeout(function () {
                first = null
              }, 300)
              console.log("一级页面退出点击一次")
            } else {
              if (new Date().getTime() - first < 1000) {
                plus.runtime.quit()
              }
            }
          }
        }, false)
      })


      var wgtVer = null;
	function plusReady(){
		// 获取本地应用资源版本号
		plus.runtime.getProperty(plus.runtime.appid,function(inf){
      wgtVer=inf.version;
      localStorage.setItem('newVer', wgtVer);
      console.log(localStorage.getItem('newVer'));
			console.log("当前应用版本：" + wgtVer);
			console.log("=================版本测试=================");
      var version = {
      'version': wgtVer
      };
    });

    var cid  =  plus.push.getClientInfo().clientid;
    console.log("cid",cid,plus.push.getClientInfo());

    console.log("获取各种版本号啊---------------")
  }
if(window.plus){
  plusReady();
  console.log("获取各种版本号啊---------------21333")
}else{
		document.addEventListener('plusready',plusReady,false)
	}



  </script>
   
  <title>fireproject</title>
  </head>
  <body>
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
</html>